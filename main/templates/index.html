<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">

    <title>Mt. Mansfield Snow Depth</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Snow depth from the top of Vermont">

    <!-- Styles -->
    <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet">
        <style>

        body {
        font: 10px sans-serif;
        }

        .axis path,
        .axis line {
        fill: none;
        stroke: #000;
        shape-rendering: crispEdges;
        }

        .x.axis path {
        display: none;
        }

        .line {
        fill: none;
        stroke: steelblue;
        stroke-width: 1.5px;
        }
    </style>


</head>

<body>
    <p>Hello World!</p>
<script src="http://d3js.org/d3.v3.js"></script>
<script>

    d3.csv("{{ url_for('static', filename='snowdepth.csv') }}", function(error, data) {
        var lastDepth,
            parseDate = d3.time.format("%Y-%m-%d").parse;

        data.forEach(function(d) {
            d.date = parseDate(d.Date);
            d.depth = parseFloat(d.Depth);

            delete d.Date;
            delete d.Depth;

            if (isNaN(d.depth)) {
                if (typeof lastDepth !== "undefined") {
                    d.depth = lastDepth;
                } else {
                    d.depth = 0.00;
                }
            }
            lastDepth = d.depth;
        })
        for (var i=500; i<600; i++) {
            console.log(data[i]);
        }
    });
</script>
</body>
</html>
